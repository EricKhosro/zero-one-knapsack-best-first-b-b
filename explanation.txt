تابع knapsack یک آرایه از Item ها را دریافت می کند که هرکدام دارای weight,value است و یک capacity که در واقع همان وزنی است که کوله پشتی ما می تواند تحمل کند. هدف ما این است که مقدار value جنس هایی که داخل کوله پشتی است را max کنیم بدون اینکه از capacity وزن اش بیشتر شود.
در ابتدا root node رو داریم که میشود همان کوله پشتی خالی و میاد درخت node ها را می گردد تا گره ای را با بیشترین حد بالا را پیدا کند و این کار را آنقدر تکرار می کند تا به گره ای از درخت می رسد که همان کوله پشتی پر است.
تابع knapsack از یک صف اولویت نیز استفاده می کند تا گره هایی را که چک کرده است را داخل آن بریزد و یک ساختمان داده Map تا برای هر گره حد بالا و پایین را در آن ذخیره کند. حد پایین می شود اون max value ای که می توان با گذاشتن ایتم ها داخل کوله بدست آورد و حد بالا میشه اون max value ای که اگر همه ی item ها را داخل کوله بگذاریم.
این الگوریتم می آید درخت جستجو را حرس می کند با چک کردن اینکه آیا حد پایین از capacity بزرگتر است یا نه که بداند آیا امکانش هست یک item دیگر را داخل کوله بگذارد یا نه.
تابع knapsack می آید max value ای که می توان با گذاشتن ایتم ها داخل کوله بدست آورد